---
layout: post
title:  å¦‚ä½•åœ¨ Debian 12 ä¸Šå®‰è£…å’Œè®¾ç½® Qemu
subtitle: Ubuntu Server/Debianä¸‹çš„ KVM è™šæ‹Ÿæœºåˆ›å»ºåŠç®¡ç†è¯¦è§£
tags:
    - Debian
---
æ— è®ºæ‚¨ç®¡ç†ä¼ä¸šæ•°æ®ä¸­å¿ƒè¿˜æ˜¯åœ¨å®¶è¿è¡Œä¸€äº› Linux æœºå™¨ï¼Œè™šæ‹ŸåŒ–éƒ½æœ‰å¯èƒ½ç®€åŒ–æ‚¨çš„åŸºç¡€è®¾æ–½ã€‚å…³é”®æœåŠ¡å¯ä»¥å®¹å™¨åŒ–åˆ°éš”ç¦»ä½†å¯ç§»æ¤çš„è™šæ‹Ÿæœº (VM) ä¸­ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„èµ„æºåˆ†é…å’Œçµæ´»æ€§ã€‚ä½†è™šæ‹ŸåŒ–è½¯ä»¶åœ¨ä¸“æœ‰å¹³å°ä¸Šçš„è®¸å¯æˆæœ¬å†æ¥å¾ˆé«˜ã€‚è½¬å‘å¼€æºè§£å†³æ–¹æ¡ˆ QEMU å’Œ KVM â€“ å…è´¹è§£é”é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„è™šæ‹ŸåŒ–ã€‚

åœ¨è¿™ä»½ç»¼åˆæŒ‡å—ä¸­ï¼Œæ‚¨å°†è·å¾—æœ‰å…³åœ¨ Linux ä¸Šå®‰è£…ã€é…ç½®å’Œç®¡ç† QEMU/KVM è™šæ‹Ÿç¯å¢ƒçš„ä¸“å®¶è§è§£ã€‚æŒ‰ç…§å®é™…æ“ä½œè¿›è¡Œæ“ä½œï¼Œæ‚¨å¾ˆå¿«å°±ä¼šåƒä¸“ä¸šäººå£«ä¸€æ ·è¿›è¡Œè™šæ‹ŸåŒ–ï¼

Qemu æ˜¯æ¨¡æ‹Ÿå™¨ï¼Œä»£è¡¨å¼€æºçš„ "å¿«é€Ÿæ¨¡æ‹Ÿå™¨"ã€‚é™¤äº†æ¨¡æ‹Ÿå™¨ï¼Œå®ƒè¿˜è¢«ç§°ä¸ºè™šæ‹Ÿå™¨ã€‚å®ƒå¯ç”¨äºåœ¨ Windowsã€MacOS å’Œ Linux ç­‰å¤šç§å¹³å°ä¸Šè¿è¡Œä»»ä½•æ“ä½œç³»ç»Ÿï¼Œæ— è®ºå…¶æ¶æ„å¦‚ä½•ã€‚è¿è¡Œ Qemu éå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒä¸éœ€è¦è¿è¡Œä»»ä½•ä¸»æœºè¡¥ä¸ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥ç®€å•å¯é ã€‚ç¬¬äºŒç§æ¨¡å¼ä»…é€‚ç”¨äº Linux å‘è¡Œç‰ˆã€‚

![å¦‚ä½•åœ¨ Debian 12 ä¸Šå®‰è£…å’Œè®¾ç½® Qemu](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/debian%20qemu.jpg)

## QEMU å’Œ KVM ç®€ä»‹ï¼šå¼ºå¤§çš„ç»„åˆ

åœ¨è¾ƒé«˜çº§åˆ«ä¸Šï¼ŒQEMU å¤„ç†è™šæ‹Ÿæœºçš„æ¨¡æ‹Ÿå·¥ä½œè´Ÿè½½ï¼Œè€Œ KVM åˆ™åˆ©ç”¨å¤„ç†å™¨ä¸Šçš„ç¡¬ä»¶æ‰©å±•è¿›è¡Œä¼˜åŒ–ã€‚ä½†æ·±å…¥ç ”ç©¶åä¼šå‘ç°å„ç»„ä»¶ä¹‹é—´å­˜åœ¨å¤æ‚çš„ç›¸äº’ä½œç”¨ã€‚

**QEMU â€“ å¤šæ‰å¤šè‰ºçš„æ¨¡æ‹Ÿå™¨**

QEMU äº 2000 å¹´ä»£åˆå¼€å‘ï¼Œä½œä¸ºä¸»è¦ä¸“æ³¨äºå®Œå…¨è™šæ‹Ÿå®¢æˆ·æ“ä½œç³»ç»Ÿçš„æ¨¡æ‹Ÿå™¨è¿›å…¥è™šæ‹ŸåŒ–é¢†åŸŸã€‚å®ƒæ‹¥æœ‰åŠ¨æ€ç¿»è¯‘è½¯ä»¶å±‚å’Œè·¨æ¶æ„ 4 æ”¯æŒï¼Œæ—©åœ¨å®¹å™¨å‡ºç°ä¹‹å‰å°±å¯ä»¥åœ¨ x86 ç¡¬ä»¶ä¸Šè¿è¡Œ PowerPC/Sparc ç­‰æ›¿ä»£å¹³å°ã€‚ä½†å¤šå¹´æ¥ï¼ŒQEMU çš„åŠŸèƒ½ä¸æ–­å‘å±•â€”â€”æœ€ç»ˆé›†æˆäº† Linux å†…æ ¸æœ¬èº«ä»¥å®ç°æ›´ç´§å¯†çš„è€¦åˆã€‚ä¸ KVM é…åˆä½œä¸ºåŠ é€Ÿå™¨åç«¯ï¼ŒQEMU ç°åœ¨å¯ä»¥ç¼–æ’ I/Oã€å­˜å‚¨æ§åˆ¶å™¨ã€BIOS å’Œå¼•å¯¼åŠ è½½ç¨‹åºã€è®¾å¤‡ç›´é€šç­‰ã€‚åŒæ—¶å°†æœ€ç¹é‡çš„è®¡ç®—å·¥ä½œè½¬ç§»åˆ°ç¡¬ä»¶ä¸Šã€‚

åˆ†æå¸ˆä¼°è®¡ï¼Œç›®å‰æœ‰è¶…è¿‡ 7500 ä¸‡ä¸ª QEMU/KVM å®ä¾‹è·¨äº‘å’Œä¼ä¸šæ•°æ®ä¸­å¿ƒè¿è¡Œã€‚å®ƒçš„é€Ÿåº¦å’Œå¤šåŠŸèƒ½æ€§æ— ç–‘æ¨åŠ¨äº†é‡‡ç”¨ã€‚

**KVM - ç¡¬ä»¶æ€§èƒ½çš„ä¸€å‰‚å¼ºå¿ƒé’ˆ**

åŸºäºå†…æ ¸çš„è™šæ‹Ÿæœºå»ºç«‹åœ¨ QEMU çš„åŸºç¡€ä¸Šï¼Œä¸å•†å“ x86 å¤„ç†å™¨ä¸­çš„ç¡¬ä»¶è™šæ‹ŸåŒ–æ‰©å±•ç›¸è¿æ¥ã€‚è‹±ç‰¹å°” VT-x ç­‰æ‰©å±•æœ€åˆç”±èŠ¯ç‰‡ä¾›åº”å•†äº 2006 å¹´æ·»åŠ ï¼Œç”¨äºååŠ©å¤šç§Ÿæˆ·å®‰å…¨å’Œåˆ†åŒºï¼Œå…è®¸å®¢æˆ·è™šæ‹Ÿæœºç›‘æ§å™¨å…¨é€Ÿè¿è¡Œï¼Œè€Œä¸å½±å“ä¿æŠ¤åŠŸèƒ½ã€‚å› æ­¤ï¼ŒQEMU å¸¦æ¥äº†ä¸°å¯Œçš„ä»¿çœŸåŠŸèƒ½ï¼Œè€Œ KVM åˆ™å¸¦æ¥äº†æ›´é«˜çš„æ€§èƒ½ã€‚åŒèµ¢ï¼

ä½†å¯ç”¨è¿™äº›åŸºäºå¤„ç†å™¨çš„åŠŸèƒ½éœ€è¦ä¸€äº›åˆå§‹æ­¥éª¤ã€‚è®©æˆ‘ä»¬å‡†å¤‡å¥½ä½ çš„ Debian ä¸»æœº...

## Qemu çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ

Qemu çš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š

ğŸ–¥å®ƒæ”¯æŒä¸åŒæ¶æ„çš„å„ç§å¹³å°

ğŸ–¥å¯åœ¨ä¸¤ç§ä¸åŒæ¨¡å¼ä¸‹è¿è¡Œ

ğŸ–¥å…è®¸ç”¨æˆ·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œæ“ä½œç³»ç»Ÿçš„æ‰€æœ‰è¿›ç¨‹

ğŸ–¥ç”¨æˆ·å¯ä»¥æ‰§è¡Œç”¨æˆ·çº§æ¨¡æ‹Ÿ

ğŸ–¥ä¸ºäº†æ’é™¤æ•…éšœï¼ŒQemu å…è®¸ç”¨æˆ·éšæ—¶æ‹æ‘„å¿«ç…§

ğŸ–¥å®ƒå…è®¸ä¸åŒçš„ç½‘ç»œé€šä¿¡ï¼ŒåŒ…æ‹¬æ¡¥æ¥ç½‘ç»œã€NAT å’Œç”¨æˆ·æ¨¡å¼ç½‘ç»œ

ğŸ–¥å¯é€šè¿‡å‘½ä»¤è¡Œç•Œé¢ä½¿ç”¨

äº†è§£äº†è¿™äº›ä¸»è¦åŠŸèƒ½åï¼Œå»ºè®®ç”¨æˆ·æŒ‰ç…§ä¸‹ä¸€èŠ‚ä»‹ç»çš„æ–¹æ³•åœ¨ Debian 12 ä¸Šå®‰è£… Qemuã€‚

## å¦‚ä½•åœ¨ Debian 12 ä¸Šå®‰è£… Qemuï¼Ÿ

è¦åœ¨ Debian 12 ä¸Šå®‰è£… Qemuï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

æ­¥éª¤ 1ï¼šæ‰“å¼€ç»ˆç«¯

è¦é€šè¿‡æ‰§è¡Œä¸€äº›ç®€å•çš„å‘½ä»¤åœ¨ Debian 12 ä¸Šå®‰è£… Qemuï¼Œè¯·ä½¿ç”¨ CTRL+ALT+T å¿«æ·é”®æ‰“å¼€ç»ˆç«¯ï¼š

![æ‰“å¼€ç»ˆç«¯](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-470-1024x412.webp)

æ­¥éª¤ 2ï¼šæ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…

ä¸ºç¡®ä¿åœ¨ Debian 12 ä¸Šå®‰è£…æ›´æ–°ç‰ˆ Qemuï¼Œè¯·ä½¿ç”¨ apt å‘½ä»¤çš„ "update "é€‰é¡¹æ›´æ–°è½¯ä»¶åŒ…ï¼š

![æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-480.webp)

æ­¥éª¤ 3ï¼šåœ¨ Debian 12 ä¸Šå®‰è£… Qemu

è¦åœ¨ Debian 12 ä¸Šå®‰è£… Qemuï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```
sudo apt install qemu-system libvirt-daemon-system libvirt-clients bridge-utils virt-manager -y
```
![åœ¨ Debian 12 ä¸Šå®‰è£… Qemu](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-481.webp)

è¿™æ„å‘³ç€ Qemu å·²æˆåŠŸå®‰è£…åœ¨ Debian 12 ä¸Šã€‚

## å¦‚ä½•ä½¿ç”¨ Debian 12 åœ¨ Qemu ä¸Šå®‰è£…ç¨³å®šç³»ç»Ÿï¼Ÿ

è¦åœ¨ Qemu ä¸Šå®‰è£…ç¨³å®šå‘è¡Œç‰ˆï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

æ­¥éª¤ 1ï¼šå¯åŠ¨ Qemu åº”ç”¨ç¨‹åº

æ‰“å¼€åº”ç”¨ç¨‹åºèœå•ï¼Œå¯åŠ¨ Qemu åº”ç”¨ç¨‹åºï¼š

![å¯åŠ¨ Qemu åº”ç”¨ç¨‹åº](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-474.webp)

æ­¥éª¤ 2ï¼šåˆ›å»ºæ–°æœºå™¨

å¯åŠ¨æœºå™¨åï¼Œç‚¹å‡»ä¸‹å›¾ä¸­æŒ‡ç¤ºçš„å›¾æ ‡åˆ›å»ºæ–°æœºå™¨ï¼š

![åˆ›å»ºæ–°æœºå™¨](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-472.webp)

ç¬¬ 3 æ­¥ï¼šé€‰æ‹©å®‰è£…ä»‹è´¨

ç°åœ¨é€‰æ‹©æ“ä½œç³»ç»Ÿçš„å®‰è£…æ–¹å¼ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè¦ä½¿ç”¨ iso æ–‡ä»¶å®‰è£…ï¼Œåˆ™ç‚¹å‡»ç¬¬ä¸€ä¸ªé€‰é¡¹ï¼š

![é€‰æ‹©å®‰è£…ä»‹è´¨](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-475.webp)

ç¬¬ 4 æ­¥ï¼šé€‰æ‹© ISO æ–‡ä»¶

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ ISO æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œè¯·æµè§ˆé€‰æ‹© ISO æ–‡ä»¶çš„ä½ç½®ï¼š

![é€‰æ‹© ISO æ–‡ä»¶](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-471.webp)

æ­¥éª¤ 5ï¼šé€‰æ‹©å†…å­˜å’Œ CPU è®¾ç½®

é€‰æ‹© ISO æ–‡ä»¶åï¼Œä¸ºæ–°æœºå™¨åˆ†é… RAM å†…å­˜å’Œ CPU æ•°é‡ï¼š

![é€‰æ‹©å†…å­˜å’Œ CPU è®¾ç½®](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-473.webp)

æ­¥éª¤ 6ï¼šåˆ†é…å­˜å‚¨å†…å­˜

åˆ†é…å®Œ CPU å’Œ RAM å†…å­˜çš„æ•°é‡åï¼Œç°åœ¨ä¸ºæœºå™¨åˆ†é…ç¡¬ç›˜å†…å­˜ï¼š

![åˆ†é…å­˜å‚¨å†…å­˜](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-476.webp)

ç¬¬ 7 æ­¥ï¼šé€‰æ‹©åç§°

æœ€åï¼Œä¸ºæœºå™¨æŒ‡å®šæ–°åç§°åç‚¹å‡» "å®Œæˆ "æŒ‰é’®ï¼š

![ä¸ºæœºå™¨æŒ‡å®šæ–°åç§°åç‚¹å‡» "å®Œæˆ "æŒ‰é’®](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-478.webp)

æŒ‰ä¸‹ "å®Œæˆ "æŒ‰é’®åï¼ŒUbuntu æ“ä½œç³»ç»Ÿå°±ä¼šå¯åŠ¨ï¼š

![Ubuntu æ“ä½œç³»ç»Ÿå°±ä¼šå¯åŠ¨](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-484.webp)

è¦ä¹ˆå®‰è£… Ubuntuï¼Œè¦ä¹ˆç‚¹å‡» "è¯•ç”¨ Ubuntu "æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚

## å¦‚ä½•åœ¨ Qemu ä¸Šå»ºç«‹æµ‹è¯•/ä¸ç¨³å®šç³»ç»Ÿï¼Ÿ

è¦åœ¨ Qemu ä¸Šå»ºç«‹æµ‹è¯•ç³»ç»Ÿæˆ–ä¸ç¨³å®šç³»ç»Ÿï¼Œè¯·æŒ‰ç…§æœ¬èŠ‚è¯´æ˜è¿›è¡Œæ“ä½œã€‚

ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç¡¬ç›˜æ˜ åƒ

é€šè¿‡è®¾ç½®å¤§å°å’Œæ ¼å¼ï¼Œä½¿ç”¨ "qemu-img "å‘½ä»¤åˆ›å»ºè™šæ‹Ÿé•œåƒï¼š
```
qemu-img create debian.img 2G
```
![åˆ›å»ºç¡¬ç›˜æ˜ åƒ](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-477.webp)

æ­¥éª¤ 2ï¼šä¸‹è½½æ“ä½œç³»ç»Ÿçš„ iso æ–‡ä»¶

ç°åœ¨ä¸‹è½½æµ‹è¯•ç‰ˆæˆ–ä¸ç¨³å®šç‰ˆæ“ä½œç³»ç»Ÿçš„ iso æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ wget å‘½ä»¤ä¸‹è½½ Debian æµ‹è¯•ç‰ˆçš„ iso æ–‡ä»¶ï¼š
```
wget  https://cdimage.debian.org/cdimage/daily-builds/daily/arch-latest/amd64/iso-cd/debian-testing-amd64-netinst.iso
```
![ä¸‹è½½æ“ä½œç³»ç»Ÿçš„ iso æ–‡ä»¶](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-482.webp)

æ­¥éª¤ 3ï¼šå®‰è£…æ“ä½œç³»ç»Ÿ

ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ä¸‹è½½çš„ iso æ–‡ä»¶å®‰è£…æ“ä½œç³»ç»Ÿï¼š
```
qemu-system-x86_64 -hda debian.img -cdrom debian-testing-amd64-netinst.iso -boot d -m 512
```
![å®‰è£…æ“ä½œç³»ç»Ÿ](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-483.webp)

ç¬¬ 4 æ­¥ï¼šå¯åŠ¨æ“ä½œç³»ç»Ÿ

æœ€åï¼Œè¿è¡Œå‘½ä»¤å¯åŠ¨å·²å®‰è£…çš„æ“ä½œç³»ç»Ÿï¼š
```
qemu-system-x86_64 -hda debian.img -m 512
```
![å¯åŠ¨æ“ä½œç³»ç»Ÿ](https://raw.githubusercontent.com/huijingfei/huijingfei.github.io/master/images/qemu/image-479.webp)

è¿™æ˜¯ä½¿ç”¨ Qemu åœ¨ Debian 12 ä¸Šè®¾ç½®æµ‹è¯•æˆ–ä¸ç¨³å®šæ“ä½œç³»ç»Ÿçš„æ–¹æ³•ã€‚

## FAQ

**å¦‚ä½•åœ¨ Qemu ä¸Šè®¾ç½®ç½‘ç»œï¼Ÿ**

è¦åœ¨ Qemu ä¸Šè®¾ç½®è”ç½‘ï¼Œä¾‹å¦‚è®¾ç½®ç”¨æˆ·æ¨¡å¼è”ç½‘ï¼Œè¯·æŒ‰ç…§ä¸‹é¢æåˆ°çš„ä¸€èˆ¬è¯­æ³•è¿è¡Œå‘½ä»¤ï¼š
```
qemu-system-<architecture> -hda mydisk.qcow2 -net user -net nic
```
å¯¹äºæ¡¥æ¥ç½‘ç»œï¼Œè¯·éµå¾ªä¸€èˆ¬è¯­æ³•ï¼š
```
qemu-system-<architecture> -hda mydisk.qcow2 -net bridge -net nic
```
**å¦‚ä½•ä½¿ç”¨ Qemu è¿›è¡Œå¿«ç…§ï¼Ÿ**

Qemu çš„ä¸»è¦åŠŸèƒ½ä¹‹ä¸€æ˜¯æ”¯æŒå¿«ç…§ã€‚è¦ç»™è¿è¡Œä¸­çš„è™šæ‹Ÿæœºæ‹å¿«ç…§ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```
qemu-img snapshot -c snapshot_name mydisk.qcow2
```
**å¦‚ä½•åœ¨ Qemu ä¸Šå…‹éš†è™šæ‹Ÿæœºï¼Ÿ**

è¦åˆ›å»ºè™šæ‹Ÿæœºçš„å…‹éš†ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹é€šç”¨è¯­æ³•è¿è¡Œå‘½ä»¤ï¼š
```
qemu-img create -f qcow2 -b mydisk.qcow2 clone.qcow2
```
**å¦‚ä½•åœ¨ Debian 12 ä¸Šå¸è½½ Qemuï¼Ÿ**

è¦å¸è½½ Debian 12 ä¸Šçš„ Qemuï¼Œè¯·ä½¿ç”¨ apt å‘½ä»¤çš„ "æ¸…é™¤ "é€‰é¡¹ã€‚è¯¥é€‰é¡¹å°†åˆ é™¤å¹¶å¸è½½ Debian 12 ä¸Šçš„ Qemu åŠå…¶æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼š
```
sudo apt purge qemu-system libvirt-daemon-system libvirt-clients bridge-utils virt-manager -y
```
Qemu å·²æˆåŠŸä» Debian 12 ä¸­å¸è½½ã€‚

## ç»“è®º

è¦åœ¨ Debian 12 ä¸Šå®‰è£… Qemuï¼Œè¯·æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œå‘½ä»¤ "sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virt-manager -y"ã€‚å®‰è£…å®Œæˆåï¼Œä¸ºç¨³å®šæ“ä½œç³»ç»Ÿæˆ–ä¸ç¨³å®š/æµ‹è¯•æ“ä½œç³»ç»Ÿè®¾ç½® Qemuã€‚æœ¬ç¯‡åšæ–‡å°†é€æ­¥ä»‹ç»åœ¨ Debian 12 ä¸Šå®‰è£…å’Œè®¾ç½® Qemu çš„æ‰€æœ‰å¯èƒ½æ–¹æ³•ã€‚

Welcome to our [website](https://blog.tigress.cc/)
